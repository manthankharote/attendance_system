<%- include('partials/_header') %>
<%- include('partials/_nav', { user: user }) %>
<style>
    .table-container { background-color: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 1rem; border-bottom: 1px solid #ddd; text-align: left; }
    .btn { padding: 0.5rem 1rem; border-radius: 5px; text-decoration: none; color: white; border: none; cursor: pointer; }
    .btn-add { background-color: #007bff; float: right; margin-bottom: 1rem; }
</style>

<main class="container">
    <h1>Manage Classes</h1>
    <a href="/admin/classes/add" class="btn btn-add">Add New Class</a>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Class Name</th>
                    <th>Teacher</th>
                    <th>No. of Students</th>
                    <th>Actions</th>
                </tr>
            </thead>
<tbody>
    <% classes.forEach(c => { %>
        <tr>
            <td><%= c.name %></td>
            <td><%= c.teacher ? c.teacher.name : 'N/A' %></td>
            <td><%= c.students.length %></td>
            <td class="action-buttons">
                <a href="/admin/classes/edit/<%= c._id %>" class="btn btn-warning">Edit</a>
                <form action="/admin/classes/delete/<%= c._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this class? This action cannot be undone.');">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </td>
        </tr>
    <% }); %>
</tbody>
</html>